---
author: memildin
ms.service: security-center
ms.topic: include
ms.date: 03/14/2021
ms.author: memildin
ms.custom: generated
ms.openlocfilehash: 4a03a36f098035db1a91b4516dedb6a303aa41d2
ms.sourcegitcommit: 3ea12ce4f6c142c5a1a2f04d6e329e3456d2bda5
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/15/2021
ms.locfileid: "103466213"
---
Hay **24** recomendaciones en esta categoría.

|Recomendación |Descripción |severity |
|---|---|---|
|Se debe habilitar Azure Defender para registros de contenedor |Para crear cargas de trabajo seguras en contenedores, asegúrese de que las imágenes en las que se basan están libres de vulnerabilidades conocidas.<br>Azure Defender para registros de contenedor examina el registro en busca de vulnerabilidades de seguridad en cada imagen de contenedor insertada y expone resultados detallados por imagen.<br>Para mejorar la posición de seguridad de los contenedores y protegerlos de ataques, habilite Azure Defender para registros de contenedor.<br><br>Importante: la corrección de esta recomendación dará lugar a cargos por la protección de los registros de contenedor. Si no tiene registros de contenedor en esta suscripción, no se aplicarán cargos.<br>Si, en el futuro, crea cualquier número de registros de contenedor en esta suscripción, estos se protegerán automáticamente y a partir de ese momento, se iniciarán los cargos.<br> <a href='https://docs.microsoft.com/azure/security-center/azure-container-registry-integration'>Más información sobre Azure Defender para registros de contenedor</a>.<br />(Directiva relacionada: [se debe habilitar Azure Defender para registros de contenedor](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fmicrosoft.authorization%2fpolicyDefinitions%2fc25d9a16-bc35-4e15-a7e5-9db606bf9ed4)) |Alto |
|Se debe habilitar Azure Defender para Kubernetes |Azure Defender para Kubernetes proporciona protección en tiempo real contra amenazas para entornos en contenedores y genera alertas en caso de actividad sospechosa.<br>Puede usar esta información para corregir problemas de seguridad y mejorar la seguridad de los contenedores rápidamente.<br><br>Importante: la corrección de esta recomendación dará lugar a cargos por la protección de los clústeres de Kubernetes. Si no tiene ningún clúster de Kubernetes en esta suscripción, no se aplicarán cargos.<br>Si, en el futuro, crea cualquier número de clústeres de Kubernetes en esta suscripción, estos se protegerán automáticamente y a partir de ese momento, se iniciarán los cargos.<br> <a href='https://docs.microsoft.com/azure/security-center/azure-kubernetes-service-integration'>Más información sobre Azure Defender para Kubernetes</a>.<br />(Directiva relacionada: [se debe habilitar Azure Defender para Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fmicrosoft.authorization%2fpolicyDefinitions%2f523b5cd1-3e23-492f-a539-13118b6d1e3a)) |Alto |
|El complemento Azure Policy para Kubernetes debería estar instalado y habilitado en sus clústeres |El complemento Azure Policy para Kubernetes amplía <a target="_blank" href="https://github.com/open-policy-agent/gatekeeper">Gatekeeper</a> v3, un webhook del controlador de admisión de <a target="_blank" href="https://www.openpolicyagent.org/">Open Policy Agent</a> (OPA), para aplicar imposiciones y medidas de seguridad a escala en los clústeres de forma centralizada y coherente.<p>Security Center requiere que el complemento audite y aplique las funcionalidades de seguridad y el cumplimiento en los clústeres. <a target="_blank" href="https://docs.microsoft.com/azure/governance/policy/concepts/policy-for-kubernetes"> Más información</a>.</p><p>Requiere Kubernetes v 1.14.0 o posterior.</p><br />(Directiva relacionada: [el complemento Azure Policy para Kubernetes Service (AKS) debería estar instalado y habilitado en sus clústeres](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f0a15ec92-a229-4763-bb14-0ea34a568f8d)) |Alto |
|Debe aplicar los límites de CPU y memoria de los contenedores. |La aplicación de límites de CPU y memoria evita los ataques de agotamiento de recursos (una forma de ataque de denegación de servicio).<p>Se recomienda establecer los límites de los contenedores para asegurarse de que el tiempo de ejecución impide que el contenedor use más del límite de recursos configurado.</p><br />(Directiva relacionada: [asegúrese de que los límites de los recursos de memoria y CPU del contenedor no superan los límites especificados en el clúster de Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fe345eecc-fa47-480f-9e88-67dcc122b164)) |Media |
|Las imágenes de contenedor solo deben implementarse desde registros de confianza |Las imágenes que se ejecutan en el clúster de Kubernetes deben provenir de registros de imagen de contenedor conocidos y supervisados. Los registros de confianza reducen el riesgo de exposición del clúster, ya que limitan la posibilidad de que se introduzcan vulnerabilidades desconocidas, problemas de seguridad e imágenes malintencionadas.<br />(Directiva relacionada: [asegúrese de que solo hay las imágenes de contenedor permitidas en el clúster de Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2ffebd0533-8e55-448f-b837-bd0e06f16469)) |Alto |
|Las instancias de Container Registry se deben cifrar con una clave administrada por el cliente (CMK) |Use claves administradas por el cliente para administrar el cifrado en reposo del contenido de los registros. De manera predeterminada, los datos se cifran en reposo con claves administradas por el servicio, pero las claves administradas por el cliente (CMK) suelen ser necesarias para cumplir estándares de cumplimiento normativo. Las CMK permiten cifrar los datos con una clave de Azure Key Vault creada por el usuario y propiedad de este. Tiene control y responsabilidad totales del ciclo de vida de la clave, incluidos la rotación y administración. Más información sobre el cifrado de CMK en https://aka.ms/acr/CMK.<br />(Directiva relacionada: [las instancias de Container Registry se deben cifrar con una clave administrada por el cliente [CMK]](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f5b9159ae-1701-4a6f-9a7a-aa9c8ddd0580)) |Media |
|Las instancias de Container Registry no deben permitir el acceso de red sin restricciones |De manera predeterminada, las instancias de Azure Container Registry aceptan conexiones a través de Internet de hosts de cualquier red. Para protegerlas frente a posibles amenazas, permita el acceso solo desde direcciones IP públicas específicas o intervalos de direcciones. Si el registro no tiene una regla de IP/firewall o una red virtual configurada, aparece en los recursos incorrectos. Obtenga más información sobre las reglas de red de Container Registry aquí: https://aka.ms/acr/portal/public-network y aquí https://aka.ms/acr/vnet.<br />(Directiva relacionada: [las instancias de Container Registry no deben permitir el acceso de red sin restricciones](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fd0793b48-0edc-4296-a390-4c75d1bdfd71)) |Media |
|Las instancias de Container Registry deben usar Private Link |Azure Private Link permite conectar la red virtual a servicios de Azure sin una dirección IP pública en el origen o el destino. La plataforma Private Link controla la conectividad entre el consumidor y los servicios a través de la red troncal de Azure. Al asignar puntos de conexión privados a las instancias de Container Registry en lugar de a todo el servicio, además se protege frente a riesgos de pérdida de datos. Más información en: https://aka.ms/acr/private-link.<br />(Directiva relacionada: [las instancias de Container Registry deben usar un vínculo privado](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fe8eef0a8-67cf-4eb4-9386-14b0e78733d4)) |Media |
|Debe evitar los contenedores con elevación de privilegios. |Los contenedores no deben ejecutarse con una elevación de privilegios a la raíz en el clúster de Kubernetes.<br>El atributo AllowPrivilegeEscalation controla si un proceso puede obtener más privilegios que el proceso primario.<br />(Directiva relacionada: [los clústeres de Kubernetes no deben permitir la elevación de privilegios del contenedor](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f1c6e92c9-99f0-4e55-9cf2-0c234dc48f99)) |Media |
|Deben evitarse los contenedores que comparten espacios de nombres de host confidenciales. |Para protegerse frente a la elevación de privilegios fuera del contenedor, evite el acceso del pod a espacios de nombres de hosts confidenciales (id. de proceso de host e IPC de host) en un clúster de Kubernetes.<br />(Directiva relacionada: [los contenedores del clúster de Kubernetes no deben compartir el identificador de proceso del host ni el espacio de nombres IPC del host](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f47a1ee2f-2a2a-4576-bf2a-e0e36709c2b8)) |Media |
|Los contenedores solo deben escuchar en los puertos permitidos. |Para reducir la superficie expuesta a ataques de un clúster de Kubernetes, restrinja el acceso al mismo, para lo que debe limitar el acceso de los contenedores a los puertos configurados.<br />(Directiva relacionada: [asegúrese de que los contenedores solo escuchan en los puertos permitidos en el clúster de Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f440b515e-a580-421e-abeb-b159a61ddcbc)) |Media |
|El sistema de archivos raíz inmutable (de solo lectura) debe aplicarse para los contenedores. |Los contenedores deben ejecutarse con un sistema de archivos raíz de solo lectura en el clúster de Kubernetes. El sistema de archivos inmutable protege los contenedores frente a cambios en el entorno de ejecución que implican la adición de archivos binarios malintencionados a PATH.<br />(Directiva relacionada: [los contenedores del clúster de Kubernetes deben ejecutarse con un sistema de archivos raíz de solo lectura](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fdf49d893-a74c-421d-bc95-c663042e5b80)) |Media |
|Los clústeres de Kubernetes solo deben ser accesibles mediante HTTPS |El uso de HTTPS garantiza la autenticación y protege los datos en tránsito frente a ataques de intercepción de nivel de red. Esta funcionalidad está disponible actualmente con carácter general para Kubernetes Service (AKS) y en versión preliminar para el motor de AKS y Kubernetes con Azure Arc habilitado. Para más información, visite https://aka.ms/kubepolicydoc<br />(Directiva relacionada: [Exigir la entrada HTTPS en el clúster de Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f1a5b4dca-0b6f-4cf5-907c-56316bc1bf3d)) |Alto |
|El servidor de Service Management API de Kubernetes debe configurarse con acceso restringido |Para asegurarse de que las aplicaciones de las redes, máquinas o subredes permitidas son las únicas que pueden acceder al clúster, restrinja el acceso al servidor de Service Management API de Kubernetes. Para restringir el acceso, defina los intervalos de IP autorizados o configure los servidores de la API como clústeres privados, como se explica en <a target='_blank' href=https://docs.microsoft.com/azure/aks/private-clusters>https://docs.microsoft.com/azure/aks/private-clusters</a>.<br />(Directiva relacionada: [los intervalos IP autorizados deben definirse en Servicios de Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f0e246bcf-5f6f-4f87-bc6f-775d4712c7ea)) |Alto |
|Kubernetes Services se debe actualizar a una versión de Kubernetes no vulnerable. |Actualice el clúster de servicio de Kubernetes a una versión de Kubernetes posterior para protegerse frente a vulnerabilidades conocidas en la versión actual de Kubernetes. La vulnerabilidad <a target='_blank' href='https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-9946'>CVE-2019-9946</a> se ha revisado en las versiones 1.11.9+, 1.12.7+, 1.13.5+ y 1.14.0+ de Kubernetes<br />(Directiva relacionada: [los servicios de Kubernetes se debe actualizar a una versión de Kubernetes no vulnerable](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2ffb893a29-21bb-418c-a157-e99480ec364c)) |Alto |
|Deben aplicarse funcionalidades de Linux con privilegios mínimos para los contenedores |Para reducir la superficie expuesta a ataques del contenedor, restrinja las funcionalidades de Linux y conceda privilegios específicos a los contenedores sin conceder todos los privilegios del usuario raíz. Se recomienda eliminar todas las funcionalidades y agregar después las que se necesiten<br />(Directiva relacionada: [los contenedores de clúster de Kubernetes solo deben usar funcionalidades permitidas](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fc26596ff-4d70-4e6a-9a30-c2506bd2f80c)) |Media |
|La opción de reemplazar o deshabilitar el perfil de AppArmor de los contenedores debe estar restringida. |Los contenedores que se ejecutan en el clúster de Kubernetes se deben limitar solo a perfiles de AppArmor permitidos.<br>AppArmor (Application Armor) es un módulo de seguridad de Linux que protege un sistema operativo y sus aplicaciones frente a amenazas de seguridad. Para usarlo, el administrador del sistema asocia un perfil de seguridad de AppArmor a cada programa.<br />(Directiva relacionada: [los contenedores de clúster de Kubernetes solo deben usar perfiles de AppArmor permitidos](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f511f5417-5d12-434d-ab2e-816901e72a5e)) |Alto |
|Deben evitarse los contenedores con privilegios. |Para evitar el acceso a los hosts sin restricciones, siempre que sea posible, evite los contenedores con privilegios.<p>Los contenedores con privilegios tienen todas las capacidades raíz de un equipo host. Se pueden usar no solo como puntos de entrada para ataques, sino también para distribuir código malintencionado o malware en aplicaciones, hosts y redes en peligro.</p><br />(Directiva relacionada: [no permitir contenedores con privilegios en un clúster de Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f95edb821-ddaf-4404-9732-666045e056b4)) |Media |
|Se debe usar el control de acceso basado en rol en los servicios de Kubernetes |Para proporcionar un filtrado detallado de las acciones que los usuarios pueden realizar, use el control de acceso basado en rol (RBAC) para administrar los permisos en los clústeres de Kubernetes Service y configurar las directivas de autorización correspondientes. Para obtener más información, consulte <a target='_blank' href='https://docs.microsoft.com/azure/aks/concepts-identity#role-based-access-controls-rbac'>Control de acceso basado en roles de Azure</a>.<br />(Directiva relacionada: [Se debe usar el control de acceso basado en rol en los servicios de Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fac4a19c2-fa67-49b4-8ae5-0b2e78c49457)) |Alto |
|Debe evitar la ejecución de contenedores como usuario raíz. |Los contenedores se deben ejecutar como usuario no raíz en el clúster de Kubernetes. La ejecución de un proceso como el usuario raíz dentro de un contenedor lo ejecuta como raíz en el host. En caso de peligro, el atacante tiene la raíz en el contenedor, y cualquier configuración errónea resulta más fácil de aprovechar.<br />(Directiva relacionada: [los contenedores y pods de clúster de Kubernetes solo deben ejecutarse con identificadores de usuario y grupo aprobados](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2ff06ddb64-5fa3-4b77-b166-acb36f7f6042)) |Alto |
|Los servicios solo deben escuchar en los puertos permitidos. |Para reducir la superficie expuesta a ataques del clúster de Kubernetes, restrinja el acceso a este limitando el acceso de los servicios a los puertos configurados.<br />(Directiva relacionada: [asegúrese de que los servicios solo realizan escuchas en los puertos permitidos del clúster de Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f233a2a17-77ca-4fb1-9b6b-69223d272a44)) |Media |
|El uso de puertos y redes de hosts debe estar restringido. |Restringe el acceso de los pods a la red del host y el intervalo de puertos de host permitidos en un clúster de Kubernetes. Los pods creados con el atributo hostNetwork habilitado compartirán el espacio de red del nodo. Para evitar que el contenedor en peligro rastree el tráfico de red, se recomienda no colocar los pods en la red del host. Si tiene que exponer un puerto de contenedor en la red del nodo y el uso de un puerto de nodo del servicio Kubernetes no satisface sus necesidades, otra posibilidad es especificar un atributo hostPort para el contenedor en la especificación del pod.<br />(Directiva relacionada: [los pods del clúster de Kubernetes solo pueden usar redes de host e intervalos de puerto permitidos](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f82985f06-dc18-4a48-bc1c-b9f4f0098cfe)) |Media |
|El uso de montajes de volúmenes HostPath de pod debe restringirse a una lista conocida, con el fin de restringir el acceso a los nodos de los contenedores en peligro |Se recomienda limitar los montajes de volúmenes HostPath de pod en el clúster de Kubernetes a las rutas de acceso de host permitidas configuradas. En caso de peligro, se debe restringir el acceso del nodo contenedor desde los contenedores<br />(Directiva relacionada: [los volúmenes hostPath del pod del clúster de Kubernetes solo deben usar rutas de host permitidas](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f098fc59e-46c7-4d99-9b16-64990e543d75)) |Media |
|Es necesario corregir las vulnerabilidades de las imágenes de Azure Container Registry (con tecnología de Qualys) |La evaluación de vulnerabilidades de la imagen de contenedor examina el registro en busca de vulnerabilidades de seguridad y expone los resultados detallados en cada imagen. La resolución de las vulnerabilidades puede mejorar considerablemente la posición de seguridad de los contenedores y protegerlos frente a ataques.<br />(Directiva relacionada: [se deben corregir las vulnerabilidades de las imágenes de Azure Container Registry](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f5f0f936f-2f01-4bf5-b6be-d423792fa562)) |Alto |
|||
